\hypertarget{ir__comm_8h}{\section{ir\+\_\+comm.\+h File Reference}
\label{ir__comm_8h}\index{ir\+\_\+comm.\+h@{ir\+\_\+comm.\+h}}
}


Droplet infrared communication subsystem functions are defined here.  


{\ttfamily \#include $<$avr/io.\+h$>$}\\*
{\ttfamily \#include $<$util/crc16.\+h$>$}\\*
{\ttfamily \#include $<$avr/interrupt.\+h$>$}\\*
{\ttfamily \#include \char`\"{}droplet\+\_\+init.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}scheduler.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structnode}{node}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{ir__comm_8h_ae48748237fd28ca88847f076714e122b}{\#define {\bfseries I\+R\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+Z\+E}~63}\label{ir__comm_8h_ae48748237fd28ca88847f076714e122b}

\item 
\hypertarget{ir__comm_8h_a7127c6e0b7ad3a852600c06609726d5f}{\#define {\bfseries I\+R\+\_\+\+U\+P\+K\+E\+E\+P\+\_\+\+F\+R\+E\+Q\+U\+E\+N\+C\+Y}~20}\label{ir__comm_8h_a7127c6e0b7ad3a852600c06609726d5f}

\item 
\hypertarget{ir__comm_8h_a778aaf14b4b645a6856f78a5b865cb96}{\#define {\bfseries I\+R\+\_\+\+M\+S\+G\+\_\+\+T\+I\+M\+E\+O\+U\+T}~10}\label{ir__comm_8h_a778aaf14b4b645a6856f78a5b865cb96}

\item 
\hypertarget{ir__comm_8h_aa495a9db05a9238c44492ebbcd694075}{\#define {\bfseries I\+R\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+B\+U\+S\+Y\+\_\+bm}~0x01}\label{ir__comm_8h_aa495a9db05a9238c44492ebbcd694075}

\item 
\hypertarget{ir__comm_8h_ae0b4a10fe3be0b3762956a6670d4890a}{\#define {\bfseries I\+R\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+bm}~0x02}\label{ir__comm_8h_ae0b4a10fe3be0b3762956a6670d4890a}

\item 
\hypertarget{ir__comm_8h_a9b3373fcd811d9acd5a1d0aba7aa51d0}{\#define {\bfseries I\+R\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+E\+R\+R\+O\+R\+\_\+bm}~0x04}\label{ir__comm_8h_a9b3373fcd811d9acd5a1d0aba7aa51d0}

\item 
\hypertarget{ir__comm_8h_a4ea2cf43ad1f1bb22ef8e90dca5255d0}{\#define {\bfseries I\+R\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+C\+O\+M\+M\+A\+N\+D\+\_\+bm}~0x08}\label{ir__comm_8h_a4ea2cf43ad1f1bb22ef8e90dca5255d0}

\item 
\hypertarget{ir__comm_8h_aa770942c30f4710a4027dd43405dc6c2}{\#define {\bfseries I\+R\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+T\+A\+R\+G\+E\+T\+E\+D\+\_\+bm}~0x10}\label{ir__comm_8h_aa770942c30f4710a4027dd43405dc6c2}

\item 
\hypertarget{ir__comm_8h_aa3272c62cf18868ef0f93dea2d7d2403}{\#define {\bfseries I\+R\+\_\+\+S\+T\+A\+T\+U\+S\+\_\+\+U\+N\+A\+V\+A\+I\+L\+A\+B\+L\+E\+\_\+bm}~0x03}\label{ir__comm_8h_aa3272c62cf18868ef0f93dea2d7d2403}

\item 
\hypertarget{ir__comm_8h_aed0188ef3bf59100e2c2494c3a2a437a}{\#define {\bfseries D\+A\+T\+A\+\_\+\+L\+E\+N\+\_\+\+V\+A\+L\+\_\+bm}~0x7\+F}\label{ir__comm_8h_aed0188ef3bf59100e2c2494c3a2a437a}

\item 
\hypertarget{ir__comm_8h_a893e0c73aa1c0c21b0c11911dfc6f72f}{\#define {\bfseries D\+A\+T\+A\+\_\+\+L\+E\+N\+\_\+\+C\+M\+D\+\_\+bm}~0x80}\label{ir__comm_8h_a893e0c73aa1c0c21b0c11911dfc6f72f}

\item 
\hypertarget{ir__comm_8h_a71b262378f4cd50af06b31778223a646}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+P\+O\+S\+\_\+\+S\+E\+N\+D\+E\+R\+\_\+\+I\+D\+\_\+\+L\+O\+W}~0}\label{ir__comm_8h_a71b262378f4cd50af06b31778223a646}

\item 
\hypertarget{ir__comm_8h_acf37e37d921a1c3d16f79f0229a72454}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+P\+O\+S\+\_\+\+S\+E\+N\+D\+E\+R\+\_\+\+I\+D\+\_\+\+H\+I\+G\+H}~1}\label{ir__comm_8h_acf37e37d921a1c3d16f79f0229a72454}

\item 
\hypertarget{ir__comm_8h_aedcb4ccbd4aec34d0fa2a19831513fba}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+P\+O\+S\+\_\+\+M\+S\+G\+\_\+\+L\+E\+N\+G\+T\+H}~2}\label{ir__comm_8h_aedcb4ccbd4aec34d0fa2a19831513fba}

\item 
\hypertarget{ir__comm_8h_ab6737ae5f56f32ecf3efb654757d85f7}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+P\+O\+S\+\_\+\+C\+R\+C\+\_\+\+L\+O\+W}~3}\label{ir__comm_8h_ab6737ae5f56f32ecf3efb654757d85f7}

\item 
\hypertarget{ir__comm_8h_a4bf62407e2523fd3ef948ab5dfaa8d3a}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+P\+O\+S\+\_\+\+C\+R\+C\+\_\+\+H\+I\+G\+H}~4}\label{ir__comm_8h_a4bf62407e2523fd3ef948ab5dfaa8d3a}

\item 
\hypertarget{ir__comm_8h_a1235b6e2a5b7a600659a459cc2673dcc}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+P\+O\+S\+\_\+\+T\+A\+R\+G\+E\+T\+\_\+\+I\+D\+\_\+\+L\+O\+W}~5}\label{ir__comm_8h_a1235b6e2a5b7a600659a459cc2673dcc}

\item 
\hypertarget{ir__comm_8h_a4f89893de49cc6ad97a099edee64b670}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+P\+O\+S\+\_\+\+T\+A\+R\+G\+E\+T\+\_\+\+I\+D\+\_\+\+H\+I\+G\+H}~6}\label{ir__comm_8h_a4f89893de49cc6ad97a099edee64b670}

\item 
\hypertarget{ir__comm_8h_ab8f5e10b9f780e53f9583724ac965a0c}{\#define {\bfseries H\+E\+A\+D\+E\+R\+\_\+\+L\+E\+N}~7}\label{ir__comm_8h_ab8f5e10b9f780e53f9583724ac965a0c}

\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{ir__comm_8h_a0a5826a450f85606fd39e5ed1ae2de8e}{typedef volatile struct \hyperlink{structnode}{node} {\bfseries msg\+\_\+node}}\label{ir__comm_8h_a0a5826a450f85606fd39e5ed1ae2de8e}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{ir__comm_8h_a5bf64edc5ad05a5fa7ebb23e6314f517}{void {\bfseries ir\+\_\+com\+\_\+init} ()}\label{ir__comm_8h_a5bf64edc5ad05a5fa7ebb23e6314f517}

\item 
\hypertarget{ir__comm_8h_a1dc4673f61e1b460949afcc29a216041}{void {\bfseries perform\+\_\+ir\+\_\+upkeep} ()}\label{ir__comm_8h_a1dc4673f61e1b460949afcc29a216041}

\item 
\hypertarget{ir__comm_8h_a4a39b46e751b2efa36842c3d4d388531}{void {\bfseries clear\+\_\+ir\+\_\+buffer} (uint8\+\_\+t dir)}\label{ir__comm_8h_a4a39b46e751b2efa36842c3d4d388531}

\item 
\hypertarget{ir__comm_8h_a5384e6f9192fbc83250310e13044a4ea}{void {\bfseries ir\+\_\+targeted\+\_\+cmd} (uint8\+\_\+t dirs, char $\ast$data, uint16\+\_\+t data\+\_\+length, uint16\+\_\+t target)}\label{ir__comm_8h_a5384e6f9192fbc83250310e13044a4ea}

\item 
\hypertarget{ir__comm_8h_ac79c29ac53e4ad952ea2779e09489035}{void {\bfseries ir\+\_\+cmd} (uint8\+\_\+t dirs, char $\ast$data, uint16\+\_\+t data\+\_\+length)}\label{ir__comm_8h_ac79c29ac53e4ad952ea2779e09489035}

\item 
\hypertarget{ir__comm_8h_afe75dfb6db9fab003527b3cd232638ff}{void {\bfseries ir\+\_\+targeted\+\_\+send} (uint8\+\_\+t dirs, char $\ast$data, uint16\+\_\+t data\+\_\+length, uint16\+\_\+t target)}\label{ir__comm_8h_afe75dfb6db9fab003527b3cd232638ff}

\item 
\hypertarget{ir__comm_8h_afb1f55cc097026760f5dac0997129a07}{void {\bfseries ir\+\_\+send} (uint8\+\_\+t dirs, char $\ast$data, uint8\+\_\+t data\+\_\+length)}\label{ir__comm_8h_afb1f55cc097026760f5dac0997129a07}

\item 
\hypertarget{ir__comm_8h_a0e4e9364cee6cf0b82a1a7bb9e764dbc}{void {\bfseries ir\+\_\+receive} (uint8\+\_\+t dir)}\label{ir__comm_8h_a0e4e9364cee6cf0b82a1a7bb9e764dbc}

\item 
\hypertarget{ir__comm_8h_a8334df2cbec2a9d69855ef2593d5a591}{void {\bfseries ir\+\_\+transmit} (uint8\+\_\+t dir)}\label{ir__comm_8h_a8334df2cbec2a9d69855ef2593d5a591}

\item 
\hypertarget{ir__comm_8h_afde3a300fa93c81d5e3961407c65572a}{void {\bfseries ir\+\_\+transmit\+\_\+complete} (uint8\+\_\+t dir)}\label{ir__comm_8h_afde3a300fa93c81d5e3961407c65572a}

\item 
\hypertarget{ir__comm_8h_a4dc8492f4de390dc19613325af63f964}{void {\bfseries ir\+\_\+reset\+\_\+rx} (uint8\+\_\+t dir)}\label{ir__comm_8h_a4dc8492f4de390dc19613325af63f964}

\item 
\hypertarget{ir__comm_8h_a55ec360c57175ce4b9d70ec154c3d667}{void {\bfseries wait\+\_\+for\+\_\+ir} (uint8\+\_\+t dirs)}\label{ir__comm_8h_a55ec360c57175ce4b9d70ec154c3d667}

\item 
\hypertarget{ir__comm_8h_ae1448bf35f37feabe726075e1c5b0f24}{void {\bfseries print\+\_\+received\+\_\+message} (void $\ast$dir\+\_\+star)}\label{ir__comm_8h_ae1448bf35f37feabe726075e1c5b0f24}

\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{ir__comm_8h_abf02277bfeeef94d1e7421a88035fc75}{U\+S\+A\+R\+T\+\_\+t $\ast$ {\bfseries channel} \mbox{[}$\,$\mbox{]}}\label{ir__comm_8h_abf02277bfeeef94d1e7421a88035fc75}

\item 
\hypertarget{ir__comm_8h_aac2f01a85929896d9b790a660241226f}{\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>uint32\_t {\bfseries last\_byte}\\
\>char {\bfseries buf} \mbox{[}IR\_BUFFER\_SIZE\mbox{]}\\
\>uint16\_t {\bfseries data\_crc}\\
\>uint16\_t {\bfseries sender\_ID}\\
\>uint16\_t {\bfseries target\_ID}\\
\>uint16\_t {\bfseries curr\_pos}\\
\>uint8\_t {\bfseries data\_length}\\
\>volatile uint8\_t {\bfseries status}\\
\} {\bfseries ir\_rxtx} \mbox{[}6\mbox{]}}\label{ir__comm_8h_aac2f01a85929896d9b790a660241226f}
\\

\end{tabbing}\item 
\hypertarget{ir__comm_8h_a35ebbd837e73762fa1c62174733a4d1a}{volatile msg\+\_\+node $\ast$ {\bfseries last\+\_\+ir\+\_\+msg}}\label{ir__comm_8h_a35ebbd837e73762fa1c62174733a4d1a}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Droplet infrared communication subsystem functions are defined here. 



Definition in file \hyperlink{ir__comm_8h_source}{ir\+\_\+comm.\+h}.

